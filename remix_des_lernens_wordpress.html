<!-- Remix des Lernens - WordPress Custom HTML Version -->
<!-- Diese Datei kann direkt in ein WordPress Custom HTML Block eingefügt werden -->

<!-- Externe Libraries -->
<script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
<script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
<script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
<script src="https://cdn.tailwindcss.com"></script>

<!-- Root Container -->
<div id="remix-des-lernens-app" style="width: 100%; height: 100vh; min-height: 700px;"></div>

<!-- Styles -->
<style>
    #remix-des-lernens-app {
        background-color: #020617;
        color: #e2e8f0;
        overflow: hidden;
        font-family: ui-sans-serif, system-ui, sans-serif;
        -webkit-tap-highlight-color: transparent;
        -webkit-touch-callout: none;
    }
    #remix-des-lernens-app .custom-scrollbar::-webkit-scrollbar { width: 4px; }
    #remix-des-lernens-app .custom-scrollbar::-webkit-scrollbar-track { background: #1e293b; }
    #remix-des-lernens-app .custom-scrollbar::-webkit-scrollbar-thumb { background: #475569; border-radius: 4px; }
    @keyframes spin-slow { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }
    #remix-des-lernens-app .animate-spin-slow {
        animation: spin-slow 4s linear infinite;
        will-change: transform;
    }
    #remix-des-lernens-app .no-select {
        -webkit-user-select: none;
        user-select: none;
    }
</style>

<script type="text/babel">
(function() {
    const { useState, useRef } = React;

    // Icons
    const IconPlay = () => (
        <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24" fill="currentColor">
            <polygon points="5 3 19 12 5 21 5 3" />
        </svg>
    );
    const IconPause = () => (
        <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24" fill="currentColor">
            <rect x="6" y="4" width="4" height="16" />
            <rect x="14" y="4" width="4" height="16" />
        </svg>
    );
    const IconInfo = () => (
        <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
            <circle cx="12" cy="12" r="10" />
            <path d="M12 16v-4" />
            <path d="M12 8h.01" />
        </svg>
    );
    const IconClose = () => (
        <svg xmlns="http://www.w3.org/2000/svg" width="26" height="26" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
            <path d="M18 6 6 18" />
            <path d="m6 6 12 12" />
        </svg>
    );

    // Modal Component
    const DocsModal = ({ isOpen, onClose }) => {
        if (!isOpen) return null;
        return (
            <div className="fixed inset-0 z-50 flex items-center justify-center bg-black/80 backdrop-blur-sm p-4">
                <div className="bg-slate-900 border border-slate-700 w-full max-w-2xl max-h-[85vh] rounded-xl shadow-2xl flex flex-col overflow-hidden">
                    <div className="flex justify-between items-center p-4 border-b border-slate-700 bg-slate-800">
                        <h2 className="text-2xl font-bold text-orange-500">Bedienungsanleitung &amp; Konzept</h2>
                        <button onClick={onClose} className="text-slate-400 hover:text-white"><IconClose /></button>
                    </div>
                    <div className="p-6 overflow-y-auto custom-scrollbar text-slate-300 text-base leading-relaxed space-y-6">
                        <section>
                            <h3 className="text-white font-bold text-xl mb-2 flex items-center gap-2">
                                <span className="bg-orange-600 w-7 h-7 rounded flex items-center justify-center text-sm">1</span>
                                Die Metapher
                            </h3>
                            <p>Das DJ-Pult ist eine Metapher für zeitgemäßes Lernen. Lehrende (und Lernende) mischen verschiedene "Tracks" (Inhalte und Methoden), um den perfekten Lern-Sound zu kreieren.</p>
                        </section>
                        <div className="grid md:grid-cols-2 gap-6">
                            <section>
                                <h4 className="font-bold text-orange-400 mb-1 text-lg">Deck A: WAS lernen?</h4>
                                <p>Dies ist die Inhaltsebene.</p>
                            </section>
                            <section>
                                <h4 className="font-bold text-blue-400 mb-1 text-lg">Deck B: WIE lernen?</h4>
                                <p>Dies ist die Methodenebene.</p>
                            </section>
                        </div>
                        <div className="bg-slate-800 p-4 rounded text-sm text-center border border-slate-700">
                            Konzept <strong>Niels Winkelmann (DigiLog.Blog)</strong><br />
                            <em>"Der Remix des Lernens" (2023)</em>
                        </div>
                    </div>
                </div>
            </div>
        );
    };

    // TouchKnob Component
    const TouchKnob = ({ label, value, onChange, min = 0, max = 100 }) => {
        const [isDragging, setIsDragging] = useState(false);
        const startYRef = useRef(0);
        const startValRef = useRef(0);

        const svgSize = 62, radius = 27, strokeWidth = 4;

        const handlePointerDown = (e) => {
            setIsDragging(true);
            startYRef.current = e.clientY;
            startValRef.current = value;
            e.target.setPointerCapture(e.pointerId);
        };
        const handlePointerMove = (e) => {
            if (!isDragging) return;
            const deltaY = startYRef.current - e.clientY;
            let newValue = startValRef.current + deltaY * 1.5;
            newValue = Math.max(min, Math.min(max, newValue));
            onChange(Math.round(newValue));
        };
        const handlePointerUp = (e) => {
            setIsDragging(false);
            try { e.target.releasePointerCapture(e.pointerId); } catch {}
        };

        const rotation = (value / max) * 180 - 60;
        const center = svgSize / 2;
        const circumference = 2 * Math.PI * radius;
        const arcLength = circumference * 0.5;
        const currentArcLength = arcLength * (value / max);

        return (
            <div className="flex flex-col items-center m-0.5 no-select" style={{touchAction: 'none'}}>
                <div className="text-[10px] md:text-[11px] text-gray-300 mb-1 uppercase text-center font-semibold truncate max-w-[90px]">
                    {label}
                </div>
                <div className="relative flex items-center justify-center cursor-ns-resize"
                     onPointerDown={handlePointerDown}
                     onPointerMove={handlePointerMove}
                     onPointerUp={handlePointerUp}
                     onPointerCancel={handlePointerUp}>
                    <svg width={svgSize} height={svgSize} style={{pointerEvents: 'none'}}>
                        <g transform={`translate(${center},${center}) rotate(-150)`}>
                            <circle r={radius} fill="none" stroke="#334155" strokeWidth={strokeWidth}
                                    strokeLinecap="round" strokeDasharray={`${arcLength} ${circumference}`} />
                            <circle r={radius} fill="none" stroke="#f97316" strokeWidth={strokeWidth}
                                    strokeLinecap="round" strokeDasharray={`${currentArcLength} ${circumference}`} />
                        </g>
                    </svg>
                    <div className={`w-12 h-12 absolute rounded-full border-2 border-slate-600 ${isDragging ? 'bg-orange-900/40' : 'bg-slate-800'} shadow-xl flex items-center justify-center`}>
                        <div className={`w-1 h-1/2 ${isDragging ? 'bg-orange-400' : 'bg-white'} absolute top-1 rounded-full`}
                             style={{transform: `rotate(${rotation}deg)`, transformOrigin: 'center bottom'}} />
                    </div>
                </div>
            </div>
        );
    };

    // TouchFader Component
    const TouchFader = ({ label, value, onChange, color = "orange" }) => {
        const trackRef = useRef(null);
        const updateValue = (clientY) => {
            if (!trackRef.current) return;
            const rect = trackRef.current.getBoundingClientRect();
            const relativeY = rect.bottom - clientY;
            let percentage = (relativeY / rect.height) * 100;
            percentage = Math.max(0, Math.min(100, percentage));
            onChange(Math.round(percentage));
        };

        const themeColor = color === "blue" ? "bg-blue-500" : "bg-orange-500";

        return (
            <div className="flex flex-col items-center w-full h-full no-select" style={{touchAction: 'none'}}>
                {label && <div className="text-[10px] md:text-[11px] font-bold text-gray-300 mb-1 uppercase text-center">{label}</div>}
                <div ref={trackRef}
                     className="relative flex-grow w-7 md:w-9 bg-slate-900 rounded border border-slate-700 shadow-inner cursor-pointer"
                     onPointerDown={(e) => { e.target.setPointerCapture(e.pointerId); updateValue(e.clientY); }}
                     onPointerMove={(e) => { if (e.buttons === 1) updateValue(e.clientY); }}>
                    <div className={`absolute bottom-0 w-full left-0 opacity-30 ${themeColor}`} style={{height: `${value}%`}} />
                    <div className="absolute left-0 w-full h-4" style={{bottom: `calc(${value}% - 8px)`}}>
                        <div className="w-full h-2 bg-slate-700 border border-slate-500 rounded-sm mx-auto" style={{width: '90%'}}>
                            <div className={`w-full h-[1px] ${themeColor}`}></div>
                        </div>
                    </div>
                </div>
            </div>
        );
    };

    // CrossFader Component
    const CrossFader = ({ value, onChange }) => {
        const trackRef = useRef(null);
        const updateValue = (clientX) => {
            if (!trackRef.current) return;
            const rect = trackRef.current.getBoundingClientRect();
            let percentage = ((clientX - rect.left) / rect.width) * 100;
            percentage = Math.max(0, Math.min(100, percentage));
            onChange(Math.round(percentage));
        };

        return (
            <div className="w-full px-4 py-2" style={{touchAction: 'none'}}>
                <div ref={trackRef}
                     className="relative w-full h-9 bg-slate-900 rounded border border-slate-700 flex items-center px-1 shadow-inner cursor-pointer"
                     onPointerDown={(e) => { e.target.setPointerCapture(e.pointerId); updateValue(e.clientX); }}
                     onPointerMove={(e) => { if (e.buttons === 1) updateValue(e.clientX); }}>
                    <div className="absolute left-2 -top-4 text-[10px] text-slate-400 font-bold">PLANUNG</div>
                    <div className="absolute right-2 -top-4 text-[10px] text-slate-400 font-bold">REFLEXION</div>
                    <div className="w-full h-0.5 bg-slate-700 relative flex items-center" style={{pointerEvents: 'none'}}>
                        <div className="absolute w-9 h-6 bg-gradient-to-b from-slate-300 to-slate-500 rounded shadow border-x border-slate-900 flex items-center justify-center"
                             style={{left: `${value}%`, transform: 'translateX(-50%)'}}>
                            <div className="w-0.5 h-full bg-orange-600"></div>
                        </div>
                    </div>
                </div>
            </div>
        );
    };

    // Pad Component
    const Pad = ({ label, active, onClick }) => {
        const activeClass = active
            ? "border-orange-500 bg-orange-900/40 text-orange-100 shadow-[0_0_10px_rgba(249,115,22,0.6)] font-bold"
            : "border-slate-500 text-slate-200 bg-slate-800/60";
        return (
            <button onClick={onClick}
                    className={`border rounded flex items-center justify-center w-full h-full ${activeClass} text-[11px] uppercase active:scale-95 select-none`}>
                {label}
            </button>
        );
    };

    // TopButton Component
    const TopButton = ({ label, active, onClick }) => {
        const activeClass = active
            ? "border-orange-500 text-orange-100 bg-orange-900/40"
            : "border-slate-500 text-slate-200 bg-slate-800";
        return (
            <div onClick={onClick}
                 className={`flex items-center justify-center w-12 h-12 rounded-full border cursor-pointer ${activeClass} select-none`}>
                <span className="text-[10px] font-bold text-center">{label}</span>
            </div>
        );
    };

    // JogWheel Component
    const JogWheel = ({ isPlaying, color = "orange" }) => {
        const strokeColor = color === "orange" ? "#f97316" : "#3b82f6";
        return (
            <div className="relative w-full aspect-square max-w-[180px] rounded-full border-[4px] border-slate-600 bg-slate-900 shadow-2xl flex items-center justify-center mx-auto my-1">
                <div className={`w-full h-full rounded-full flex items-center justify-center ${isPlaying ? 'animate-spin-slow' : ''}`}>
                    <svg viewBox="0 0 100 100" className="w-[90%] h-[90%] opacity-90">
                        <path d="M50,50 m0,0 a1,1 0 0,1 2,0 a2,2 0 0,1 -4,0 a3,3 0 0,1 6,0 a4,4 0 0,1 -8,0 a5,5 0 0,1 10,0 a6,6 0 0,1 -12,0 a7,7 0 0,1 14,0 a8,8 0 0,1 -16,0 a9,9 0 0,1 18,0 a10,10 0 0,1 -20,0"
                              fill="none" stroke={strokeColor} strokeWidth="1.2" strokeLinecap="round" />
                    </svg>
                </div>
            </div>
        );
    };

    // Main App
    function App() {
        const [showDocs, setShowDocs] = useState(false);
        const [padsLeft, setPadsLeft] = useState({ cue: true, bne: false, curr: true, logic: false, access: false, rel: true });
        const [topBtnsLeft, setTopBtnsLeft] = useState({ in: false, out: false, loop: false, sync: false });
        const [isPlayingLeft, setIsPlayingLeft] = useState(false);
        const [padsRight, setPadsRight] = useState({ cue: true, pract: false, prob: true, fail: false, res: false, share: true });
        const [topBtnsRight, setTopBtnsRight] = useState({ in: false, out: false, loop: false, sync: false });
        const [isPlayingRight, setIsPlayingRight] = useState(false);
        const [knobs, setKnobs] = useState({
            oeffentlich: 70, plenum: 55, note: 80, prozess: 60, summative: 30, product: 40,
            formative: 80, projekt: 50, doku: 50, planung: 70, feedForward: 60, ziel: 80,
            feedUp: 50, reflexion: 40, feedback: 75, collabMaster: 60
        });
        const [faders, setFaders] = useState({ was: 80, wie: 70, crossfader: 50 });
        const [collabStrip, setCollabStrip] = useState({ teamRef: 30, peerFeed: 70, peerCoach: 40, peerRev: 60, peerAss: 20 });

        const updateKnob = (k, v) => setKnobs(prev => ({ ...prev, [k]: v }));
        const togglePad = (deck, key) => {
            if (deck === "left") setPadsLeft(p => ({ ...p, [key]: !p[key] }));
            else setPadsRight(p => ({ ...p, [key]: !p[key] }));
        };
        const toggleTopBtn = (deck, key) => {
            if (deck === "left") setTopBtnsLeft(p => ({ ...p, [key]: !p[key] }));
            else setTopBtnsRight(p => ({ ...p, [key]: !p[key] }));
        };

        return (
            <div className="fixed inset-0 w-full h-full bg-[#0f172a] p-2 md:p-4 flex flex-col no-select">
                <div className="flex justify-between items-center px-4 h-10 mb-2">
                    <h1 className="text-xl md:text-3xl font-black uppercase text-slate-100">
                        Remix <span className="text-orange-500">des Lernens</span>
                    </h1>
                    <button onClick={() => setShowDocs(true)}
                            className="flex items-center gap-2 px-4 py-1.5 bg-slate-800 border border-slate-600 rounded-full text-xs md:text-sm font-bold text-orange-400">
                        <IconInfo /> <span>Doku</span>
                    </button>
                </div>

                <div className="flex-grow flex gap-2 md:gap-3 bg-[#1e293b] rounded-2xl border-4 border-[#334155] p-2 md:p-3 shadow-2xl overflow-hidden">
                    {/* DECK A */}
                    <div className="flex-1 flex flex-col bg-slate-900/30 rounded-xl p-1.5 border border-slate-700/30 min-w-0">
                        <div className="flex justify-between px-1 mb-1.5 gap-1.5">
                            {["In", "Out", "Loop", "Sync"].map(l => (
                                <TopButton key={l} label={l} active={topBtnsLeft[l.toLowerCase()]}
                                          onClick={() => toggleTopBtn("left", l.toLowerCase())} />
                            ))}
                        </div>
                        <div className="bg-slate-100 text-orange-600 px-2 py-1 text-center text-3xl md:text-4xl font-black uppercase transform -rotate-1 shadow-md mx-3 mb-2">
                            Was<br />lernen?
                        </div>
                        <div className="flex-grow flex items-center justify-center min-h-0">
                            <JogWheel isPlaying={isPlayingLeft} color="orange" />
                        </div>
                        <div className="grid grid-cols-4 gap-2 md:gap-3 h-[24%]">
                            <Pad label="CUE" active={padsLeft.cue} onClick={() => togglePad("left", "cue")} />
                            <Pad label="BNE" active={padsLeft.bne} onClick={() => togglePad("left", "bne")} />
                            <Pad label="Curric." active={padsLeft.curr} onClick={() => togglePad("left", "curr")} />
                            <div />
                            <div className="flex items-center justify-center">
                                <button onClick={() => setIsPlayingLeft(p => !p)}
                                        className={`w-11 h-11 rounded-full border-2 flex items-center justify-center ${isPlayingLeft ? 'border-green-500 bg-green-500/20 text-green-400' : 'border-slate-500 text-slate-300 bg-slate-800'}`}>
                                    {isPlayingLeft ? <IconPause /> : <IconPlay />}
                                </button>
                            </div>
                            <Pad label="Sachl." active={padsLeft.logic} onClick={() => togglePad("left", "logic")} />
                            <Pad label="Zugang" active={padsLeft.access} onClick={() => togglePad("left", "access")} />
                            <Pad label="Relev." active={padsLeft.rel} onClick={() => togglePad("left", "rel")} />
                        </div>
                    </div>

                    {/* MIXER */}
                    <div className="w-[32%] flex flex-col bg-[#162032] border-x-2 border-slate-900 px-1.5 py-1.5 rounded-xl min-w-0">
                        <div className="border-2 border-orange-500 rounded-lg p-2 mb-2 mx-2">
                            <div className="text-orange-500 text-[11px] font-bold uppercase text-center mb-2">Output</div>
                            <div className="grid grid-cols-3 gap-x-4 justify-items-center">
                                <TouchKnob label="Öffentlich" value={knobs.oeffentlich} onChange={v => updateKnob("oeffentlich", v)} />
                                <TouchKnob label="Plenum" value={knobs.plenum} onChange={v => updateKnob("plenum", v)} />
                                <TouchKnob label="Note" value={knobs.note} onChange={v => updateKnob("note", v)} />
                            </div>
                        </div>

                        <div className="grid grid-cols-3 gap-x-4 mb-2 flex-grow justify-items-center px-2 min-h-0">
                            <div className="flex flex-col gap-2 items-center h-full">
                                <TouchKnob label="Prozess" value={knobs.prozess} onChange={v => updateKnob("prozess", v)} />
                                <TouchKnob label="Sum. Assess" value={knobs.summative} onChange={v => updateKnob("summative", v)} />
                                <TouchKnob label="Planung" value={knobs.planung} onChange={v => updateKnob("planung", v)} />
                                <TouchKnob label="Ziel" value={knobs.ziel} onChange={v => updateKnob("ziel", v)} />
                                <TouchKnob label="Reflexion" value={knobs.reflexion} onChange={v => updateKnob("reflexion", v)} />
                            </div>
                            <div className="flex flex-col gap-2 items-center h-full">
                                <TouchKnob label="Produkt" value={knobs.product} onChange={v => updateKnob("product", v)} />
                                <TouchKnob label="Form. Assess" value={knobs.formative} onChange={v => updateKnob("formative", v)} />
                                <div className="flex gap-3 py-2 px-2 bg-slate-900/40 rounded border border-slate-800/50 w-full flex-grow">
                                    <TouchFader label="Was" value={faders.was} onChange={v => setFaders(f => ({ ...f, was: v }))} color="orange" />
                                    <TouchFader label="Wie" value={faders.wie} onChange={v => setFaders(f => ({ ...f, wie: v }))} color="blue" />
                                </div>
                            </div>
                            <div className="flex flex-col gap-2 items-center h-full">
                                <TouchKnob label="Projekt" value={knobs.projekt} onChange={v => updateKnob("projekt", v)} />
                                <TouchKnob label="Dokumentation" value={knobs.doku} onChange={v => updateKnob("doku", v)} />
                                <TouchKnob label="Feed Fwd" value={knobs.feedForward} onChange={v => updateKnob("feedForward", v)} />
                                <TouchKnob label="FeedUp" value={knobs.feedUp} onChange={v => updateKnob("feedUp", v)} />
                                <TouchKnob label="Feedback" value={knobs.feedback} onChange={v => updateKnob("feedback", v)} />
                            </div>
                        </div>

                        <div className="pb-1">
                            <CrossFader value={faders.crossfader} onChange={v => setFaders(f => ({ ...f, crossfader: v }))} />
                        </div>
                    </div>

                    {/* DECK B */}
                    <div className="flex-1 flex flex-col bg-slate-900/30 rounded-xl p-1.5 border border-slate-700/30 min-w-0">
                        <div className="flex justify-between px-1 mb-1.5 gap-1.5">
                            {["In", "Out", "Loop", "Sync"].map(l => (
                                <TopButton key={l} label={l} active={topBtnsRight[l.toLowerCase()]}
                                          onClick={() => toggleTopBtn("right", l.toLowerCase())} />
                            ))}
                        </div>
                        <div className="bg-slate-100 text-orange-600 px-2 py-1 text-center text-3xl md:text-4xl font-black uppercase transform rotate-1 shadow-md mx-3 mb-2">
                            Wie<br />lernen?
                        </div>
                        <div className="flex-grow flex items-center justify-center min-h-0">
                            <JogWheel isPlaying={isPlayingRight} color="blue" />
                        </div>
                        <div className="grid grid-cols-4 gap-2 md:gap-3 h-[24%]">
                            <Pad label="CUE" active={padsRight.cue} onClick={() => togglePad("right", "cue")} />
                            <Pad label="Üben" active={padsRight.pract} onClick={() => togglePad("right", "pract")} />
                            <Pad label="Probl." active={padsRight.prob} onClick={() => togglePad("right", "prob")} />
                            <div />
                            <div className="flex items-center justify-center">
                                <button onClick={() => setIsPlayingRight(p => !p)}
                                        className={`w-11 h-11 rounded-full border-2 flex items-center justify-center ${isPlayingRight ? 'border-green-500 bg-green-500/20 text-green-400' : 'border-slate-500 text-slate-300 bg-slate-800'}`}>
                                    {isPlayingRight ? <IconPause /> : <IconPlay />}
                                </button>
                            </div>
                            <Pad label="Fehler" active={padsRight.fail} onClick={() => togglePad("right", "fail")} />
                            <Pad label="Forsch" active={padsRight.res} onClick={() => togglePad("right", "res")} />
                            <Pad label="Teilen" active={padsRight.share} onClick={() => togglePad("right", "share")} />
                        </div>
                    </div>

                    {/* KOLLABORATION */}
                    <div className="w-[19%] flex flex-col bg-[#1e293b] border-l-4 border-[#0f172a] p-1.5 items-center rounded-xl min-w-0">
                        <div className="bg-[#fff7ed] text-orange-600 px-2 py-1 text-[11px] font-bold uppercase rounded mb-3 w-full text-center">
                            Kollaboration
                        </div>
                        <div className="mb-3">
                            <TouchKnob label="Kollab Master" value={knobs.collabMaster} onChange={v => updateKnob("collabMaster", v)} />
                        </div>
                        <div className="flex-grow flex flex-col justify-between w-full gap-2 min-h-0 px-0.5">
                            {Object.entries({
                                teamRef: "Team Reflexion",
                                peerFeed: "Peer Feedback",
                                peerCoach: "Peer Coaching",
                                peerRev: "Peer Review",
                                peerAss: "Peer Assessment"
                            }).map(([key, label]) => (
                                <div key={key} className="flex flex-col w-full gap-0.5">
                                    <div className="text-[10px] md:text-[11px] uppercase text-slate-300 font-bold text-center">{label}</div>
                                    <input type="range" min="0" max="100" value={collabStrip[key]}
                                           onChange={e => setCollabStrip(prev => ({ ...prev, [key]: parseInt(e.target.value) || 0 }))}
                                           className="w-full h-2 accent-sky-500 bg-slate-800 rounded-full" />
                                </div>
                            ))}
                        </div>
                    </div>
                </div>

                <DocsModal isOpen={showDocs} onClose={() => setShowDocs(false)} />
            </div>
        );
    }

    // Mount
    const container = document.getElementById("remix-des-lernens-app");
    if (container) {
        const root = ReactDOM.createRoot(container);
        root.render(<App />);
    }
})();
</script>
